let canvas=document.getElementsByClassName("rain")[0];canvas.width=window.innerWidth,canvas.height=window.innerHeight;let c=canvas.getContext("2d");function randomNum(e,t){return Math.floor(Math.random()*e)+t}function RainDrops(e,t,r,o,n){this.x=e,this.y=t,this.endy=r,this.velocity=o,this.opacity=n,this.draw=function(){c.beginPath(),c.moveTo(this.x,this.y),c.lineTo(this.x,this.y-this.endy),c.lineWidth=1,c.strokeStyle="rgba(255, 255, 255, "+this.opacity+")",c.stroke()},this.update=function(){let e=window.innerHeight+100;this.y>=e?this.y=this.endy-100:this.y=this.y+this.velocity,this.draw()}}let rainArray=[];for(let e=0;e<1540;e++){let e=Math.floor(Math.random()*window.innerWidth)+1,t=-500*Math.random(),r=randomNum(30,5),o=randomNum(20,5),n=.55*Math.random();rainArray.push(new RainDrops(e,t,r,o,n))}function animateRain(){requestAnimationFrame(animateRain),c.clearRect(0,0,window.innerWidth,window.innerHeight);for(let e=0;e<rainArray.length;e++)rainArray[e].update()}function audioPlay(...e){for(let t=0;t<e.length;t++)e[t].play()}const rainAudio=new Audio;rainAudio.src="../audio/rain.mp3",rainAudio.loop=!0,rainAudio.volume=.6;const carAudio=new Audio;carAudio.src="../audio/car.mp3",carAudio.loop=!0,carAudio.volume=1;const looseAudio=new Audio;looseAudio.src="../audio/loose.mp3",looseAudio.volume=.9;const wolfAudio=new Audio;wolfAudio.src="../audio/wolf.mp3",wolfAudio.volume=.9;const carHeadlights=document.querySelectorAll(".main__car__headlight");function carHeadlightActive(){setInterval((()=>{carHeadlights.forEach((e=>{e.classList.toggle("main__car__headlight--active")}))}),3e3)}const wolfAudioPlay=setInterval((()=>{audioPlay(wolfAudio)}),17e3),words={colors:["red","green","blue","yellow","purple","black","white"],animals:["cat","dog","bird","lion","tiger","elephant","zebra"],jobs:["engineer","doctor","teacher","nurse","chef","driver","singer"],places:["park","street","house","building","city","country","forest"]};let wordKey,keyIndex;function getRandomWord(e){const t=Math.floor(Math.random()*Object.keys(e).length),r=Math.floor(Math.random()*e[Object.keys(e)[t]].length);wordKey=Object.keys(e)[t],keyIndex=e[Object.keys(e)[t]][r]}let wordArr,underscores,word,startButton=document.querySelector(".main__start__button"),startScreen=document.querySelector(".main__start"),startTittle=document.querySelector(".main__start__title"),wordsBox=document.querySelector(".main__words"),wordsTittle=document.querySelector(".main__words__tittle"),wordsWord=document.querySelector(".main__words__word"),guyElements=document.querySelectorAll(".main__guy__item"),currentBodyPartIndex=0;function gameStart(e){return e.classList.add("main__start--hidden"),animateRain(),audioPlay(rainAudio,carAudio),carHeadlightActive(),getRandomWord(words),guyElements.forEach((e=>{e.classList.add("hide")})),wordsTittle.innerText=`${wordKey.toUpperCase()} :`,word=keyIndex.toUpperCase(),underscores="_".repeat(word.length),wordArr=word.split(""),wordsWord.innerText=underscores,guyElements.forEach((e=>e.classList.add("hide"))),wordArr}document.addEventListener("keydown",(e=>{console.log(e);let t=e.code,r=e.key.toUpperCase(),o=!1;wordArr.forEach(((e,t)=>{r===e&&(underscores=underscores.split(""),underscores[t]=e,underscores=underscores.join(""),wordsWord.innerText=underscores,o=!0)})),!o&&t.startsWith("Key")&&(audioPlay(looseAudio),guyElements[currentBodyPartIndex].classList.remove("hide"),currentBodyPartIndex+=1),wordsWord.innerText===word&&(gameStart(startScreen),currentBodyPartIndex=0),6===currentBodyPartIndex&&(wordsBox.style.display="none",startTittle.innerText="YOU LOSE",startButton.innerText="Play Again",startScreen.classList.add("main__start--loose"),startScreen.classList.remove("main__start--hidden"),currentBodyPartIndex=0)})),startButton.addEventListener("click",(()=>{gameStart(startScreen),wordsBox.style.display="flex"}));